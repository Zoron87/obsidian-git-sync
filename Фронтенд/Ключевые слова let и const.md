
Узнайте, как определить область видимости переменных и констант с помощью ключевых слов let и const в TypeScript.

## Ключевое слово `let`

Изменчивость переменных в JavaScript иногда может приводить к ошибкам, когда случайно определяются переменные с одинаковыми именами в разных областях видимости внутри блока кода.

Рассмотрим следующий код на TypeScript:

```typescript
// Объявляем переменную index с типом number и присваиваем ей значение 0
var index: number = 0;

// Если index равен 0, создаем новую область видимости блока с новой переменной также называемой index, но с типом number и значением 2, и выводим её значение
if (index == 0) {
    var index: number = 2;
    console.log(`index = ${index}`);
}

// Выводим значение index
console.log(`index = ${index}`);
```

```no-highlight
index = 2
index = 2
```

Переменная index переопределена в блоке if

- На **строке 2** мы определяем переменную `index` типа `number` с помощью ключевого слова `var` и присваиваем ей значение `0`.
    
- Затем мы проверяем, равно ли это значение `0` на **строке 5**, и если это так, то входим в блок кода.
    
- Первое утверждение в этом блоке кода на **строке 6** определяет переменную `index` типа `number` и затем присваивает ей значение `2`.
    
- Затем мы выводим значение переменной `index` как внутри этого блока кода на **строке 7**, так и за его пределами на **строке 11**.
    

Это показывает, что, даже если мы думали, что создали новую переменную внутри блока кода `if` с именем `index`, это переопределение переменной на самом деле указывает на исходную переменную `index` и не создает новую. Таким образом, установка значения переменной `index` внутри блока кода также изменит значение переменной `index` за пределами блока кода. Это не то, что было задумано.

Спецификация JavaScript ES6 вводит ключевое слово `let`, чтобы предотвратить это.

Давайте перепишем предыдущий код, используя ключевое слово `let`. 

```typescript
// Объявляем переменную index с типом number и присваиваем ей значение 0
let index: number = 0;

// Если index равен 0, создаем новую область видимости блока с новой переменной также называемой index, но с типом number и значением 2, и выводим её значение
if (index == 0) {
    let index: number = 2;
    console.log(`index = ${index}`);
}

// Выводим значение index
console.log(`index = ${index}`);
```

```no-highlight
index = 2
index = 0
```

Переменная index объявлена с ключевым словом let

Разница между этим кодом и предыдущим заключается в использовании `let` вместо `var` для объявления переменной `index` на **строках 2 и 6** соответственно.

Использование `let` создает новую переменную с областью видимости блока вместо переменной с областью видимости функции, как `var`. Это означает, что переменная `index`, объявленная в области видимости блока оператора `if`, не перезапишет переменную `index` за пределами области видимости блока.

> **Совет:** Рекомендуется использовать ключевое слово `let` для определения переменных и вообще не использовать ключевое слово `var`. Используя `let`, мы более явно указываем на предполагаемое использование этих переменных, что поможет компилятору обнаружить любые ошибки в нашем коде, где эти правила нарушаются.

## Ключевое слово `const`

При работе с переменными иногда полезно указать, что значение переменной не может быть изменено после того, как оно было создано с определенным значением. TypeScript использует ключевое слово `const`, которое было введено в ES6, чтобы достичь этого.

Рассмотрим следующий код:

```typescript
// Объявляем переменную constValue с типом string и присваиваем ей значение "это не должно быть изменено"
const constValue = "это не должно быть изменено";

// Попытка присвоить новое значение "обновлено" переменной constValue
constValue = "обновлено";
```

```no-highlight
index.ts(5,1): error TS2588: Невозможно присвоить значение 'constValue', поскольку это константа.
```

Значение const не может быть изменено

- Мы определяем переменную с именем `constValue` и указываем, что её значение не может быть изменено, используя ключевое слово `const` на **строке 2**.
    
- Генерируется ошибка, потому что мы попытались изменить значение переменной `constValue` на **строке 5**, что не разрешено.
    

> **Совет:** Рекомендуется идентифицировать константные переменные в нашем коде и явно отмечать их как `const`. Использование `const` и `let` четко указывает читателю кода намерение переменной. Переменная, отмеченная как `const`, не может быть изменена, а переменная, объявленная с помощью `let`, является временной переменной с областью видимости блока.