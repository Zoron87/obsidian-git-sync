
— IL (Intermediate Language) - промежуточный язык, независимый от процессора.
— CIL (Common Intermediate Language) - общедоступный промежуточный язык, используемый в .NET.
— MSIL (Microsoft Intermediate Language) - устаревшее название CIL.
— CLI (Common Language Infrastructure) - общая языковая инфраструктура, спецификация для .NET.
— JIT (Just-In-Time) - компиляция в момент исполнения, способ компиляции CIL в родной машинный код.

Как работает .NET?
1. Исходный код языков программирования .NET компилируется в IL.
2. IL собирается в сборку CLI.
3. Сборки CLI выполняются в среде выполнения .NET с помощью JIT-компиляции.

Подведем итоги:
— Исходный код .NET компилируется в IL, который затем собирается в сборку CLI.
— Сборки CLI выполняются в среде выполнения .NET с помощью JIT-компиляции.

С другого ресурса:

**CLI (Common Language Infrastructure)** – это открытая спецификация, разработанная компанией Microsoft. Это библиотека скомпилированного кода, используемая для развертывания, создания версий и обеспечения безопасности. В .NET существует два типа CLI: сборки процессов (EXE) и сборки библиотек (DLL). Сборки CLI содержат код на языке CIL, и, как уже упоминалось, при компиляции языков программирования CLI исходный код транслируется в код CIL, а не в объектный код, специфичный для платформы или процессора.

1. При компиляции исходный код сначала транслируется в IL (в .NET это CIL, а ранее назывался MSIL).
2. Затем CIL собирается в байткод и создается сборка CLI.
3. Перед выполнением кода CLI-код проходит через JIT-компилятор среды выполнения для генерации родного машинного кода.
4. Процессор компьютера выполняет родной машинный код.

--------------------------------------------------
Принцип работы .NET основан на концепции Common Language Infrastructure (CLI). CLI определяет стандарты для создания и исполнения кода на разных языках. CLI состоит из нескольких компонентов:

- **Common Intermediate Language (CIL)** — это байт-код, в какой компилируется код на любом языке .NET. CIL не зависит от архитектуры процессора или операционной системы.
- **Common Language Runtime (CLR)** — это виртуальная машина, исполняющая CIL-код. CLR обеспечивает такие функции, как сборка мусора, обработка исключений, безопасность и отладка.
- **Common Type System (CTS)** — это набор правил для определения типов данных и их взаимодействия в CIL-коде. CTS гарантирует совместимость типов между разными языками.
- **Common Language Specification (CLS)** — это подмножество CTS, которое определяет минимальный набор функций, которые должен поддерживать любой язык .NET. CLS обеспечивает взаимодействие кода на разных языках.
- **Base Class Library (BCL)** — это набор стандартных классов и интерфейсов, которые предоставляют базовые функции для работы с файлами, строками, коллекциями, сетью.

Рассмотрим поэтапно:

1. Когда программист пишет код на любом языке .NET, он использует BCL и другие библиотеки .NET.
2. Затем он компилирует код в CIL-код с помощью специального компилятора для своего языка. Например, для C# используется компилятор csc.exe.
3. Полученный CIL-код сохраняется в файле с расширением .exe или .dll.
4. Потом пользователь запускает приложение на .NET, CLR загружает CIL-код в виртуальную машину CLR.
5. CLR транслирует CIL-код в нативный код для конкретной платформы с помощью технологии JIT (Just-In-Time) компиляции.
6. Результат: CIL-код становится исполняемым на любой платформе, где есть CLR.


**IL** (Intermediate Language) — код на специальном языке, напоминающим ассемблер, но написанном для .NET. В него преобразуется код из других языков верхнего уровня (c#, VisualBasic). Вот тогда-то и пропадает зависимость от выбранного языка. Ведь все преобразуется в IL (правда тут есть оговорки соответствия общей языковой спецификации CLS, что не входит в рамки данной статьи)  
Вот как он выглядит для функции SomeClass::GetAge()  
[![IL](https://habrastorage.org/r/w1560/getpro/habr/post_images/d74/489/e68/d74489e68d5cdd93ad46682e50960afc.jpg)](http://www.flickr.com/photos/49055286@N07/4497521477/ "IL by asArtem, on Flickr")

#вопрос_с_собеса #вопросы_Csharp #